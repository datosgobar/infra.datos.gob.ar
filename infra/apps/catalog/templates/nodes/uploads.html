{% extends 'base.html' %}

{% block styles %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/nodes_styles.css' %}"/>
{% endblock %}

{% block breadcrumbs %}
    <li>
        <a href="{% url 'catalog:nodes' %}">Nodos</a>
    </li>
    <li>{{ node_name }}</li>
{% endblock %}

{% block content %}
<h1 class="text-primary">Cat치logo del nodo {{ node_name }}</h1>

<div class="row">
    <div class="col-sm-8 col-sm-offset-2 container general-container">
        <div class="row">
            <div class="col-sm-6">
                <h3 class="text-primary">Cat치logo actual</h3>
                {% if has_json %}
                    <a class="btn btn-link" href="{{ base_url }}{{ node_name }}/data.json" download="data.json">data.json</a>
                {% endif %}
                {% if has_xlsx %}
                    <a class="btn btn-link" href="{{ base_url }}{{ node_name }}/catalog.xlsx" download="catalog.xlsx">catalog.xlsx</a>
                {% endif %}
                {% if not has_json and not has_xlsx %}
                    <small>No hay cat치logos subidos</small>
                {% endif %}
            </div>

            <div class="col-sm-6">
                <h3 class="text-primary">Versiones anteriores</h3>
                    {% for catalog in object_list %}
                        <a class="btn btn-primary btn-sm" href="/{% if 'media' in base_url %}media/{% endif %}{{ catalog.json_file }}" download="{{ catalog.json_file }}">{{ catalog.uploaded_at|date:"Y-m-d" }} (JSON) </a>
                        <a class="btn btn-primary btn-sm" href="/{% if 'media' in base_url %}media/{% endif %}{{ catalog.xlsx_file }}" download="{{ catalog.xlsx_file }}">{{ catalog.uploaded_at|date:"Y-m-d" }} (XLSX) </a>
                    {% empty %}
                        <small>No hay versiones anteriores disponibles</small>
                    {% endfor %}
            </div>
        </div>
        <br>
        <div class="row">
            <div class="inline col-sm-8 col-sm-offset-2">
                <a class="btn btn-primary" href="{% url 'catalog:add_catalog' node_id=node_id %}">Subir nuevo cat치logo</a>
                {% if user.is_superuser %}
                    <form class='form-inline' action="{% url 'catalog:sync_catalog' node_id=node_id %}" method="post">
                    {% csrf_token %}
                    <input type="submit" value="SYNC" class="btn btn-primary"/>
                    </form>
                {% endif %}
            </div>
        </div>

        <div class="row">
            <div class="col-sm-8 col-sm-offset-2">
                <h3 class="text-primary">Distribuciones</h3>
                <a class="btn btn-primary" href="{% url 'catalog:node_distributions' node_id=node_id %}">Ver distribuciones</a>
            </div>
        </div>
    </div>
</div>
<br>
<div class="row">
    <a class="btn btn-primary btn-sm" href="{% url 'catalog:nodes' %}">Volver</a>
</div>
{% endblock %}
